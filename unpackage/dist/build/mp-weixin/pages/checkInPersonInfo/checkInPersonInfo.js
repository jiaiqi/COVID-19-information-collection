(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/checkInPersonInfo/checkInPersonInfo"],{"0f0a":function(e,t,o){"use strict";o.r(t);var n=o("b217"),a=o("25e8");for(var i in a)"default"!==i&&function(e){o.d(t,e,function(){return a[e]})}(i);o("556d");var r,s=o("f0c5"),c=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],r);t["default"]=c.exports},2328:function(e,t,o){"use strict";(function(e){o("7ad1"),o("921b");n(o("66fd"));var t=n(o("0f0a"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o("543d")["createPage"])},"25e8":function(e,t,o){"use strict";o.r(t);var n=o("b2c5"),a=o.n(n);for(var i in n)"default"!==i&&function(e){o.d(t,e,function(){return n[e]})}(i);t["default"]=a.a},"556d":function(e,t,o){"use strict";var n=o("f37a"),a=o.n(n);a.a},b217:function(e,t,o){"use strict";var n,a=function(){var e=this,t=e.$createElement;e._self._c},i=[];o.d(t,"b",function(){return a}),o.d(t,"c",function(){return i}),o.d(t,"a",function(){return n})},b2c5:function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(o("a34a"));function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t,o,n,a,i,r){try{var s=e[i](r),c=s.value}catch(u){return void o(u)}s.done?t(c):Promise.resolve(c).then(n,a)}function r(e){return function(){var t=this,o=arguments;return new Promise(function(n,a){var r=e.apply(t,o);function s(e){i(r,n,a,s,c,"next",e)}function c(e){i(r,n,a,s,c,"throw",e)}s(void 0)})}}var s=function(){return o.e("components/uni-popup/uni-popup").then(o.bind(null,"593e"))},c=function(){return o.e("components/form").then(o.bind(null,"19aa"))},u={name:"idCardInfoCollect",components:{uniPopup:s,bxform:c},data:function(){return{formType:"form",id:null,src:"",showForm:!1,previewCanvasStyle:"width: 375px; height: 250px;margin-bottom: 20px;position:fixed;top:99999999999999upx;",tempFilePath:"",beforeImg:"",compressImg:"",afterImg:"",ctxWidth:"",ctxHeight:"",fileList:[],picList:[],responseList:[],formData:{name:"",id_card_addr:"",id_card_no:""},configCols:[{label:"姓名",column:"name",value:"",type:"input",isRequire:!0,isShowExp:[],buttons:[{name:"拍照",type:"navTo"}],options:[]},{label:"户籍所在地",column:"id_card_addr",value:"",type:"input",isRequire:!0,isShowExp:[],options:[]},{label:"身份证号",column:"id_card_no",value:"",type:"input",isRequire:!0,isShowExp:[],options:[]},{label:"体温",column:"temperature",value:"",type:"digit",isRequire:!0,isShowExp:[],options:[]},{label:"车牌号",column:"vehicle",value:"",type:"input",isRequire:!1,isShowExp:[],options:[]},{label:"手机号",column:"phone",value:"",type:"number",isRequire:!1,isShowExp:[],options:[]},{label:"备注",column:"remark",value:"",type:"textarea",isRequire:!1,isShowExp:[],options:[]}],dept_no:"",id_card_photo:"",profile_picture:""}},onLoad:function(t){var o=this;if(console.log("peop-option",t),t.dept_no&&(console.log(t.dept_no),this.dept_no=t.dept_no),t.formType&&(this.formType=t.formType,"detail"===this.formType&&e.setNavigationBarTitle({title:"人员详情"})),t.formData){this.formData=JSON.parse(decodeURIComponent(t.formData));var n=this.formData,a=this.configCols;n.profile_picture&&(this.profile_picture=n.profile_picture),n.id_card_photo&&(this.id_card_photo=n.id_card_photo),a.forEach(function(e,t){"name"===e.column&&o.$set(o.configCols[t],"value",n[e.column]),"id_card_addr"===e.column&&o.$set(o.configCols[t],"value",n[e.column]),"id_card_no"===e.column&&o.$set(o.configCols[t],"value",n[e.column])}),console.log("configCols",this.configCols)}t.id?(this.id=t.id,this.getPersonInfo(this.id)):this.showForm=!0},methods:{handleClick:function(t){console.log(t),"name"==t.column&&"拍照"===t.name&&e.redirectTo({url:"../takePhotos/takePhotos?addType=person&dept_no="+this.dept_no})},getPersonInfo:function(){var e=r(n.default.mark(function e(t){var o,a,i;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return o=this.getServiceUrl("daq","srvdaq_check_person_select","select"),a={serviceName:"srvdaq_check_person_select",condition:[{colName:"id",ruleType:"eq",value:t}]},e.next=4,this.$http.post(o,a);case 4:i=e.sent,console.log("srvdaq_init_view_select",i),"SUCCESS"===i.data.state&&i.data.data.length>0&&(this.formData=i.data.data[0],console.log("this.activityData",this.activityData),this.setFieldsVals(this.formData));case 7:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),setFieldsVals:function(e){var t=this.configCols;for(var o in e)for(var n=0;n<t.length;n++)t[n].column===o&&(t[n].value=e[o]);this.showForm=!0},added:function(){var t=r(n.default.mark(function t(){var o,a,i,r,s;return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(o=this.$refs.bxform.getFieldModel(),o["dept_no"]=this.dept_no,o["id_card_photo"]=this.id_card_photo,o["profile_picture"]=this.profile_picture,a=this.getServiceUrl("daq","srvdaq_check_person_add","add"),i=[],!o){t.next=26;break}if(null===this.id){t.next=17;break}return a=this.getServiceUrl("daq","srvdaq_check_person_update","add"),i=[{serviceName:"srvdaq_check_person_update",data:[o],condition:[{colName:"id",ruleType:"eq",value:this.id}]}],t.next=12,this.$http.post(a,i);case 12:r=t.sent,console.log("srvdaq_check_person_add",r),"SUCCESS"===r.data.state&&r.data.response.length>0&&e.reLaunch({url:"../home/home?currentTab=1",animationType:"pop-out",animationDuration:200}),t.next=24;break;case 17:return a=this.getServiceUrl("daq","srvdaq_check_person_add","add"),i=[{serviceName:"srvdaq_check_person_add",data:[o]}],t.next=21,this.$http.post(a,i);case 21:s=t.sent,console.log("srvdaq_check_person_add",s),"SUCCESS"===s.data.state&&s.data.response.length>0&&e.reLaunch({url:"../home/home?currentTab=1",animationType:"pop-out",animationDuration:200});case 24:t.next=27;break;case 26:console.log("表单填写不完整");case 27:case"end":return t.stop()}},t,this)}));function o(){return t.apply(this,arguments)}return o}()}};t.default=u}).call(this,o("543d")["default"])},f37a:function(e,t,o){}},[["2328","common/runtime","common/vendor"]]]);