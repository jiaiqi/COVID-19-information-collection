(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/checkInCarInfo/checkInCarInfo"],{"4ad9":function(e,t,a){"use strict";a.r(t);var o=a("d8b1"),n=a.n(o);for(var r in o)"default"!==r&&function(e){a.d(t,e,function(){return o[e]})}(r);t["default"]=n.a},"774b":function(e,t,a){"use strict";var o,n=function(){var e=this,t=e.$createElement;e._self._c},r=[];a.d(t,"b",function(){return n}),a.d(t,"c",function(){return r}),a.d(t,"a",function(){return o})},"835c":function(e,t,a){"use strict";var o=a("a4c9"),n=a.n(o);n.a},"9a8c":function(e,t,a){"use strict";a.r(t);var o=a("774b"),n=a("4ad9");for(var r in n)"default"!==r&&function(e){a.d(t,e,function(){return n[e]})}(r);a("835c");var i,c=a("f0c5"),s=Object(c["a"])(n["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],i);t["default"]=s.exports},a4c9:function(e,t,a){},d81a:function(e,t,a){"use strict";(function(e){a("7ad1"),a("921b");o(a("66fd"));var t=o(a("9a8c"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("543d")["createPage"])},d8b1:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a("a34a"));function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a,o,n,r,i){try{var c=e[r](i),s=c.value}catch(u){return void a(u)}c.done?t(s):Promise.resolve(s).then(o,n)}function i(e){return function(){var t=this,a=arguments;return new Promise(function(o,n){var i=e.apply(t,a);function c(e){r(i,o,n,c,s,"next",e)}function s(e){r(i,o,n,c,s,"throw",e)}c(void 0)})}}var c=function(){return a.e("components/form").then(a.bind(null,"19aa"))},s={components:{bxform:c},data:function(){return{formType:"form",id:null,carData:null,showCamera:!0,showForm:!1,beforeImg:"",configCols:[{label:"车牌号",column:"car_no",value:"",type:"input",isRequire:!0,isShowExp:[],options:[],buttons:[{name:"拍照",type:"car_no"}]},{label:"归属地",column:"from_addr",value:"",type:"input",isRequire:!0,isShowExp:[{column:"car_no",type:"neq",value:""}],options:[]},{label:"联系人电话",column:"phone",value:"",type:"input",isRequire:!0,isShowExp:[{column:"car_no",type:"neq",value:""}],options:[]},{label:"人数",column:"person_num",value:"",type:"number",isRequire:!0,isShowExp:[{column:"car_no",type:"neq",value:""}],options:[]},{label:"现场照片",column:"car_photo",value:"",type:"images",isRequire:!1,isShowExp:[{column:"car_no",type:"neq",value:""}],srvInfo:{tableName:"bxdaq_check_car",appNo:"daq"},options:[]},{label:"备注",column:"remark",value:"",type:"textarea",isRequire:!1,isShowExp:[{column:"car_no",type:"neq",value:""}],options:[]}],file_no:"",car_no:"",dept_no:"",car_photo:""}},created:function(){this.$route.query.hasOwnProperty("id")&&(this.getCarInfo(this.$route.query.id),this.id=this.$route.query.id)},onLoad:function(t){var a=this;if(console.log("car-option",t),t.dept_no&&(this.dept_no=t.dept_no),t.formType&&(this.formType=t.formType,"detail"===this.formType&&e.setNavigationBarTitle({title:"车辆详情"})),t.formData){var o=JSON.parse(decodeURIComponent(t.formData)),n=this.configCols;o.car_photo&&(this.car_photo=o.car_photo),n.forEach(function(e,t){"car_no"===e.column&&a.$set(a.configCols[t],"value",o.car_no),"car_photo"===e.column&&a.$set(a.configCols[t],"value",o.car_photo),console.log("configCols",a.configCols)})}t.id?(this.id=t.id,this.getCarInfo(this.id)):this.showForm=!0},onShow:function(){this.$route.query.hasOwnProperty("id")&&(this.getCarInfo(this.$route.query.id),this.id=this.$route.query.id)},methods:{handleClick:function(t){console.log(t),"car_no"==t.column&&"拍照"===t.name&&e.redirectTo({url:"../takePhotos/takePhotos?addType=car&dept_no="+this.dept_no})},getCarInfo:function(){var e=i(o.default.mark(function e(t){var a,n,r;return o.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=this.getServiceUrl("daq","srvdaq_check_car_select","select"),n={serviceName:"srvdaq_check_car_select",condition:[{colName:"id",ruleType:"eq",value:t}]},e.next=4,this.$http.post(a,n);case 4:r=e.sent,console.log("srvdaq_init_view_select",r),"SUCCESS"===r.data.state&&r.data.data.length>0&&(this.carData=r.data.data[0],console.log("this.activityData",this.activityData),this.setFieldsVals(this.carData));case 7:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),added:function(){var t=i(o.default.mark(function t(){var a,n,r,i,c;return o.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(a=this.$refs.bxform.getFieldModel(),a["dept_no"]=this.dept_no,n=this.getServiceUrl("daq","srvdaq_check_car_add","add"),r=[{serviceName:"srvdaq_check_car_add",data:[{car_no:"陕A55556",from_addr:"陕西西安",phone:"13611112222",car_photo:"20200212131045939100",person_num:3,remark:"没去疫区"}]}],!a){t.next=25;break}if(console.log("itemData",a),null===this.id){t.next=16;break}return n=this.getServiceUrl("daq","srvdaq_check_car_update","add"),r=[{serviceName:"srvdaq_check_car_update",data:[a],condition:[{colName:"id",ruleType:"eq",value:this.id}]}],t.next=11,this.$http.post(n,r);case 11:i=t.sent,console.log("srvdaq_check_car_add",i),"SUCCESS"===i.data.state&&i.data.response.length>0&&e.reLaunch({url:"../home/home",animationType:"pop-out",animationDuration:200}),t.next=23;break;case 16:return n=this.getServiceUrl("daq","srvdaq_check_car_add","add"),r=[{serviceName:"srvdaq_check_car_add",data:[a]}],t.next=20,this.$http.post(n,r);case 20:c=t.sent,console.log("srvdaq_check_car_add",c),"SUCCESS"===c.data.state&&c.data.response.length>0&&e.reLaunch({url:"../home/home",animationType:"pop-out",animationDuration:200});case 23:t.next=26;break;case 25:console.log("表单填写不完整");case 26:case"end":return t.stop()}},t,this)}));function a(){return t.apply(this,arguments)}return a}(),setFieldsVals:function(e){var t=this.configCols;for(var a in e)for(var o=0;o<t.length;o++)t[o].column===a&&(t[o].value=e[a]);this.showForm=!0},error:function(e){console.log(e.detail)}}};t.default=s}).call(this,a("543d")["default"])}},[["d81a","common/runtime","common/vendor"]]]);